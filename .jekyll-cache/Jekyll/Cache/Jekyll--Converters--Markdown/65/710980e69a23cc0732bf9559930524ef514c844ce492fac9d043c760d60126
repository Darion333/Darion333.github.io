I"È<h2 id="target-learn-basic-python-scripting-to-run-quantum-chemistry-simulation-from-scratch">Target: Learn basic python scripting to run quantum chemistry simulation from scratch</h2>
<h2 id="topics">Topics</h2>
<ol>
  <li>Geometry generation</li>
  <li>Input file generation</li>
  <li>Output file processing</li>
</ol>

<h2 id="prerequisites">Prerequisites</h2>
<ol>
  <li>conda installed on your system</li>
  <li>create new channel called python_tutorial with the following packages installed:
 jupyter, numpy, matplotlib</li>
</ol>

<h2 id="example-task">Example Task:</h2>
<p>Study the potential energy curve of a water molecule at various H-O-H angles while keep the bond length fixed.</p>

<p><img src="http://localhost:4000/images/tutorial-01/water-forever.gif" alt="Alt text that describes the graphic" title="A vibrating water" style="width: 200px;" />
<img src="http://localhost:4000/images/tutorial-01/pec.png" alt="Alt text that describes the graphic" title="A vibrating water" style="width: 400px;" /></p>

<h2 id="generate-geometries">Generate geometries</h2>

<p>xyz file has the following general format</p>

<figure class="highlight"><pre><code class="language-plaintext" data-lang="plaintext">3

O 0.00000 0.000000 0.000000
H -0.672459 0.672459 0.000000
H 0.672459 0.672459 0.000000</code></pre></figure>

<p>Put the water molecule on the x-y plane with O at the orgin, itâ€™s easy to write down the expression of the coordinates.</p>

<p><img src="http://localhost:4000/images/tutorial-01/water_axis.jpg" alt="Alt text that describes the graphic" title="A vibrating water" style="width: 400px;" /></p>

<figure class="highlight"><pre><code class="language-plaintext" data-lang="plaintext">import numpy as np

def writeHOHxyz(bl, angle_min, angle_max, angle_increment):
    for deg in np.arange(angle_min, angle_max + 1, angle_increment):
        x = np.sin(np.deg2rad(deg / 2.0)) * bl
        y = np.cos(np.deg2rad(deg / 2.0)) * bl
        xyzname = "HOH-bl-" + str(bl) + "-deg-" + str(deg).zfill(3) + ".xyz"
        print(xyzname)
        xyz = open(xyzname, "w")
#TODO Write out the lines in xyz file

writeHOHxyz(0.951, 90, 180, 10)</code></pre></figure>

<h2 id="terachem-input-generation">TeraChem Input Generation</h2>
<p><br />To run a terachem job on our GPU cluster, one needs at least 3 files: geometry, input deck, submission script.
<br />Here we are going to write a script to generate terachem input deck and submission scripts in batch.
<br />A basic terachem input deck looks like the following:</p>

<figure class="highlight"><pre><code class="language-plaintext" data-lang="plaintext"># TeraChem input deck: energy.in
coordinates     HOH-bl-0.951-deg-090.xyz
charge          0
spinmult        1
basis           6-31g*
method          b3lyp
run             energy
scf             diis+a
timings         yes
end</code></pre></figure>

<p>A basic jobscript for SGE queueing system looks like the following:</p>

<figure class="highlight"><pre><code class="language-plaintext" data-lang="plaintext">#$ -S /bin/bash
#$ -N HOH-bl-0.951-deg-090
#$ -l h_rt=00:05:00
#$ -l gpus=1
#$ -cwd
#$ -q gpus*
#$ -pe smp 1
# -fin *
# -fout *

export OMP_NUM_THREADS=1
module load terachem/tip
terachem energy.in &gt; energy.out</code></pre></figure>

:ET